!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ReduxCrudManager",[],t):"object"==typeof exports?exports.ReduxCrudManager=t():e.ReduxCrudManager=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={metadataKey:Symbol("metadata")},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getIn=function e(t,r){var n=r.slice();if(n.length>1){return e(t[n.shift()],n)}return t[r]},t.asArray=function(e){return Array.isArray(e)?e:[e]}},function(e,t,r){(function(e){!function(r,n){"use strict";var a={};r.PubSub=a;var o=r.define;!function(e){function t(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function r(e){return function(){throw e}}function n(e,t,n){try{e(t,n)}catch(e){setTimeout(r(e),0)}}function a(e,t,r){e(t,r)}function o(e,t,r,o){var u,i=f[t],c=o?a:n;if(f.hasOwnProperty(t))for(u in i)i.hasOwnProperty(u)&&c(i[u],e,r)}function u(e,t,r){return function(){var n=String(e),a=n.lastIndexOf(".");for(o(e,e,t,r);-1!==a;)n=n.substr(0,a),a=n.lastIndexOf("."),o(e,n,t,r)}}function i(e){for(var r=String(e),n=Boolean(f.hasOwnProperty(r)&&t(f[r])),a=r.lastIndexOf(".");!n&&-1!==a;)r=r.substr(0,a),a=r.lastIndexOf("."),n=Boolean(f.hasOwnProperty(r)&&t(f[r]));return n}function c(e,t,r,n){var a=u(e,t,n);return!!i(e)&&(!0===r?a():setTimeout(a,0),!0)}var f={},l=-1;e.publish=function(t,r){return c(t,r,!1,e.immediateExceptions)},e.publishSync=function(t,r){return c(t,r,!0,e.immediateExceptions)},e.subscribe=function(e,t){if("function"!=typeof t)return!1;f.hasOwnProperty(e)||(f[e]={});var r="uid_"+String(++l);return f[e][r]=t,r},e.clearAllSubscriptions=function(){f={}},e.clearSubscriptions=function(e){var t;for(t in f)f.hasOwnProperty(t)&&0===t.indexOf(e)&&delete f[t]},e.unsubscribe=function(t){var r,n,a,o="string"==typeof t&&(f.hasOwnProperty(t)||function(e){var t;for(t in f)if(f.hasOwnProperty(t)&&0===t.indexOf(e))return!0;return!1}(t)),u=!o&&"string"==typeof t,i="function"==typeof t,c=!1;if(o)return void e.clearSubscriptions(t);for(r in f)if(f.hasOwnProperty(r)){if(n=f[r],u&&n[t]){delete n[t],c=t;break}if(i)for(a in n)n.hasOwnProperty(a)&&n[a]===t&&(delete n[a],c=!0)}return c}}(a),"function"==typeof o&&o.amd?o(function(){return a}):(void 0!==e&&e.exports&&(t=e.exports=a),t.PubSub=a,e.exports=t=a)}("object"==typeof window&&window||this)}).call(t,r(3)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(e,t){function r(){var e=Date.now(),t=r.last||e;return r.last=e>t?e:t+1}var n=e&&e.pid?e.pid.toString(36):"",a=null,o=a?parseInt(a.replace(/\:|\D+/gi,"")).toString(36):"";t.exports=function(e){return(e||"")+o+n+r().toString(36)},t.exports.process=function(e){return(e||"")+n+r().toString(36)},t.exports.time=function(e){return(e||"")+r().toString(36)}}).call(t,r(5),r(3)(e))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(s===clearTimeout)return clearTimeout(e);if((s===n||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}function u(){h&&p&&(h=!1,p.length?y=p.concat(y):v=-1,y.length&&i())}function i(){if(!h){var e=a(u);h=!0;for(var t=y.length;t;){for(p=y,y=[];++v<t;)p&&p[v].run();v=-1,t=y.length}p=null,h=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function f(){}var l,s,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{s="function"==typeof clearTimeout?clearTimeout:n}catch(e){s=n}}();var p,y=[],h=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new c(e,t)),1!==y.length||h||a(i)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=f,d.addListener=f,d.once=f,d.off=f,d.removeListener=f,d.removeAllListeners=f,d.emit=f,d.prependListener=f,d.prependOnceListener=f,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeleted=t.isUpdated=t.isCreated=t.isSynced=t.isSyncing=t.isFetching=void 0;var n=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.isFetching=function(e){return e[a.default.metadataKey].fetching},t.isSyncing=function(e){return e[a.default.metadataKey].syncing},t.isSynced=function(e){return e[a.default.metadataKey].synced},t.isCreated=function(e){return"create"!==e[a.default.metadataKey].nextSync},t.isUpdated=function(e){return"update"!==e[a.default.metadataKey].nextSync},t.isDeleted=function(e){var t=e[a.default.metadataKey];return!t.synced&&"delete"===t.nextSync}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMetadataForItems=t.setCustomMeta=t.setMeta=t.meta=t.getMeta=void 0;var n=function(){function e(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),u=function(e){return e&&e.__esModule?e:{default:e}}(o),i=r(8),c=r(1),f=t.getMeta=function(e){return e[u.default.metadataKey]},l=(t.meta=function(e){return console.warn("ReduxCRUDManager meta() is deprecated. Use getMeta() instead"),f(e)},t.setMeta=function(e,t){var r=e,n=r[u.default.metadataKey]||{},o=a({},n,t);return r[u.default.metadataKey]=o,r});t.setCustomMeta=function(e,t){var r=Array.isArray(e)?i.defaultMetaItems:i.defaultMetaItem,a={};return Object.entries(t).forEach(function(e){var t=n(e,2),o=t[0],u=t[1];void 0!==r[o]?console.error("ReduxCRUDManager: meta '"+o+"' is a reserved property. Use another key"):a[o]=u}),l(e,a)},t.setMetadataForItems=function(e,t){return(0,c.asArray)(e).map(function(e){return a({},e,l(e,t))})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultMetaItems={fetching:!1,fetched:!1,syncing:!1,synced:!1,nextSync:null},t.defaultMetaItem={syncing:!1,synced:!1,localId:null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMeta=t.setMeta=t.meta=t.selectors=t.createManager=void 0;var n=r(10),a=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),i=r(7);t.createManager=a.default,t.selectors=u,t.meta=i.meta,t.setMeta=i.setCustomMeta,t.getMeta=i.getMeta},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(2),u=n(o),i=r(11),c=n(i),f=r(12),l=n(f),s=r(13),d=n(s),p=r(16),y=n(p),h=function(e){var t=a({},y.default,e),r=(0,l.default)(t),n=r.actionCreators,o=r.actionReducers;return{reducer:(0,d.default)(t,o),actionCreators:n,actions:(0,c.default)(t,n),subscribe:function(e,t){u.default.subscribe(y.default.eventKey+"."+e,function(e,r){return t(r)})},unsubscribe:function(e){e?u.default.unsubscribe(y.default.eventKey+"."+e):u.default.unsubscribe(y.default.eventKey)}}};t.default=h,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(4),c=n(i),f=r(2),l=n(f),s=r(6),d=r(1),p=r(0),y=n(p),h=function(e,t,r){var n={};if(t&&t.length)t.forEach(function(t){n[t]=e[t]});else{if(!r||!r.length)return e;Object.keys(e).filter(function(e){return!r.includes(e)}).forEach(function(t){n[t]=e[t]})}return n},v=function(e,t,r){return Array.isArray(e)?e.map(function(e){return h(e,t,r)}):h(e,t,r)};t.default=function(e,t){var r=e.remoteActions,n=e.reducerPath,i=function(t,r){l.default.publish(e.eventKey+"."+t,r)};return{fetchAll:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(c,f){var l=u({},e,o,{state:f()});if(i("willFetchAll",a),a)return i("willFetchLocal",a),Promise.resolve(c(t.fetched(a,l)));var p=(0,d.getIn)(f(),n);if((0,s.isFetching)(p))return null;var y=p;return(!0===l.cache||"function"==typeof l.cache&&!0===l.cache(y))&&y.length>0?Promise.resolve(y):(c(t.fetching()),i("willFetchAllRemote",a),r.fetchAll(null,l).then(function(e){return c(t.fetched(e,l))}))}},fetchOne:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(o,c){var f=u({},e,a,{state:c()}),l=(0,d.getIn)(c(),f.reducerPath);if(i("willFetchOne",n),(0,s.isFetching)(l))return Promise.resolve(null);var p=l.find(function(t){return t[e.idKey]===n});return(!0===f.cache||"function"==typeof f.cache&&!0===f.cache(p))&&p?(i("willFetchOneLocal",n),Promise.resolve(p)):(o(t.fetching()),i("willFetchOneRemote",n),r.fetchOne(n,f).then(function(e){return o(t.fetched(e,f))}))}},create:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(f){var l=u({},e,o),s=(0,d.asArray)(n);if(i("willCreate",s),!l.remote){var p=s.map(function(e){var t;if(e[l.idKey])throw new Error("Redux Crud Manager: key '"+l.idKey+"' is not allowed for local items");var r=(0,c.default)(l.prefixLocalId);return u({},e,(t={},a(t,l.idKey,r),a(t,y.default.metadataKey,{localId:r}),t))});return i("willCreateLocal",s),Promise.resolve(f(t.createLocal(p,l)))}var h=v(s,l.includeProperties,l.excludeProperties);return i("willCreateRemote",s),r.create(h,l).then(function(e){return f(t.created(e,l))})}},update:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(c){var f=u({},e,o),l=(0,d.asArray)(n);if(i("willUpdate",l),!f.remote)return i("willUpdateLocal",l),Promise.resolve(c(t.updateLocal(l,f)));if(f.showUpdatingProgress)if(f.updateLocalBeforeRemote)c(t.updating(l,f));else{var s=l.map(function(e){return a({},f.idKey,e[f.idKey])});c(t.updating(s,f))}var p=v(l,f.includeProperties,f.excludeProperties);return i("willUpdateRemote",l),r.update(p,f).then(function(e){return c(t.updated(e,f))})}},delete:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(o){var c=u({},e,a),f=(0,d.asArray)(n);return i("willDelete",f),c.remote?(i("willDeleteRemote",f),r.delete(f,c).then(function(){return o(t.deleted(f,c))})):(i("willDeleteLocal",f),o(c.forceDelete?t.deleted(f,c):t.deleteLocal(f,c)))}},sync:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(c,f){var l=u({},e,i),p=(0,d.getIn)(f(),n),h=p.filter(function(e){return!(0,s.isCreated)(e)}),m=p.filter(function(e){return!(0,s.isUpdated)(e)}),g=p.filter(function(e){return(0,s.isDeleted)(e)}),b=h.length?v(h,l.includeProperties,l.excludeProperties):[],w=m.length?v(m,l.includeProperties,l.excludeProperties):[];c(t.syncing({itemsToCreate:b,itemsToUpdate:w,itemsToDelete:g}));var x=void 0;x=b.length?Promise.all(b.map(function(e){return r.create(e,l).then(function(t){return u({},t,a({},y.default.metadataKey,e[y.default.metadataKey]))})})):Promise.resolve([]);var M=w.length?r.update(w,l):Promise.resolve([]),O=g.length?r.delete(g,l):Promise.resolve([]);return Promise.all([x,M,O]).then(function(e){var r=o(e,3),n=r[0],a=r[1],u=r[2],i={itemsCreated:n,itemsUpdated:a,itemsDeleted:u};return c(t.synced(i,l))})}},clearMeta:function(){return t.clearMeta()}}},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["fetching","fetched","createLocal","created","updateLocal","updating","updated","deleteLocal","deleting","deleted","syncing","synced","clearMeta"];t.default=function(e){var t=e.reducerPath.map(function(e){return e.toUpperCase()}).join("_"),r="REDUX_CRUD_MANAGER_"+t,a={},o={};return n.forEach(function(e){var t=Symbol(r+"_"+e);o[e]=t,a[e]=function(e,r){return{type:t,data:e,config:r}}}),{actionCreators:a,actionReducers:o}},e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(14),c=n(i),f=r(7),l=r(0),s=n(l),d=r(1),p=r(8),y=function(e,t){return(0,f.setMeta)(e.slice(),t)},h={synced:!1,syncing:!1,fetching:!1},v={synced:!1,syncing:!0,fetching:!1},m={synced:!0,syncing:!1,fetching:!1};t.default=function(e,t){var r=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=u({},e,n);if(a.replace)return r;var o=void 0;if("number"==typeof a.startIndex){var i={};r.forEach(function(e,t){var r=a.startIndex+t;i[r]={$set:e}}),o=(0,c.default)(t,i)}else{var f={},l=[];r.forEach(function(e){var r=t.findIndex(function(t){return t[a.idKey]===e[a.idKey]});-1!==r?f[r]={$set:e}:l.push(e)}),o=(0,c.default)(t,{$push:l}),o=(0,c.default)(o,f)}return o},n=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=u({},e,n),o=(0,d.asArray)(r);o.forEach(function(e){if(t.find(function(t){return t[a.idKey]===e[a.idKey]}))throw new Error("ReduxCRUDSync: item with id "+e[a.idKey]+" already exist")});var i=(0,c.default)(t,{$push:o});return i[s.default.metadataKey]=t[s.default.metadataKey],i},i=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=u({},e,n),i=(0,d.asArray)(r),f={};return i.forEach(function(e){var r=e[a.idKey],n=e[s.default.metadataKey].localId,i=void 0,l=e;if(n){var d;if(-1===(i=t.findIndex(function(e){return e[s.default.metadataKey].localId===n})))throw new Error("Redux Crud Manager: item with localId '"+n+"' is undefined");l=(0,c.default)(e,(d={},o(d,s.default.metadataKey,{localId:{$set:null}}),o(d,a.idKey,{$set:r}),d))}else if(-1===(i=t.findIndex(function(e){return e[a.idKey]===r})))throw new Error("Redux Crud Manager: item with id '"+r+"' is undefined");a.merge?f[i]={$set:u({},t[i],l)}:f[i]={$set:l}}),(0,c.default)(t,f)},l=function(t,r){for(var n=(0,d.asArray)(r),a=n.map(function(r){return t.findIndex(function(t){return t[e.idKey]===r[e.idKey]})}).sort(function(e,t){return e<t?-1:e>t?1:0}),o=t,u=a.length-1;u>=0;u-=1)o=(0,c.default)(o,{$splice:[[a[u],1]]});return o},g=[];return g[s.default.metadataKey]=p.defaultMetaItems,function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,c=arguments[1],p=o[s.default.metadataKey],b=c.data&&c.data[s.default.metadataKey]||{},w=u({},p,b);switch(c.type){case t.fetching:return y(o,u({},w,{fetching:!0}));case t.fetched:var x=u({},m,{nextSync:null}),M=(0,f.setMetadataForItems)(c.data,x),O=r(o,M,c.config);return w=u({},w,m,{fetched:!0}),y(O,w);case t.createLocal:var P=u({},h,{nextSync:"create"}),j=(0,f.setMetadataForItems)(c.data,P),A=n(o,j,c.config);return w=u({},w,h),y(A,w);case t.created:var S=u({},m,{nextSync:null}),_=(0,f.setMetadataForItems)(c.data,S),I=n(o,_,c.config);return w=u({},w,m),y(I,w);case t.updateLocal:var K=u({},h,{nextSync:"update"}),E=(0,f.setMetadataForItems)(c.data,K),$=i(o,E,c.config);return w=u({},w,h),y($,w);case t.updating:var C=(0,d.asArray)(c.data),T=C.map(function(t){return Object.keys(t).filter(function(t){return t!==e.idKey})}).reduce(function(e,t){return[].concat(a(e),a(t))}),F=Array.unique(T),L=u({},v,{nextSync:"update",keys:F}),D=(0,f.setMetadataForItems)(c.data,L),R=i(o,D,c.config);return w=u({},w,v),y(R,w);case t.updated:var U=u({},m,{nextSync:null,keys:null}),k=(0,f.setMetadataForItems)(c.data,U),q=i(o,k,c.config);return w=u({},w,m),y(q,w);case t.deleteLocal:var B=u({},h,{nextSync:"delete",deleted:!0}),N=(0,f.setMetadataForItems)(c.data,B),Y=i(o,N,c.config);return w=u({},w,h),y(Y,w);case t.deleting:var V=u({},v,{nextSync:"delete",deleted:!0}),G=(0,f.setMetadataForItems)(c.data,V),X=i(o,G,c.config);return w=u({},w,v),y(X,w);case t.deleted:var z=u({},m,{nextSync:null}),H=(0,f.setMetadataForItems)(c.data,z),J=l(o,H,c.config);return w=u({},w,m),y(J,w);case t.syncing:var Q=(0,f.setMetadataForItems)(c.data.itemsToCreate,u({},v,{nextSync:"create"})),W=(0,f.setMetadataForItems)(c.data.itemsToUpdate,u({},v,{nextSync:"update"})),Z=(0,f.setMetadataForItems)(c.data.itemsToDelete,u({},v,{deleted:!0,nextSync:"delete"})),ee=o;return ee=i(ee,Q,c.config),ee=i(ee,W,c.config),ee=i(ee,Z,c.config),y(ee,v);case t.synced:var te=(0,f.setMetadataForItems)(c.data.itemsCreated,u({},m,{nextSync:null})),re=(0,f.setMetadataForItems)(c.data.itemsUpdated,u({},m,{nextSync:null})),ne=(0,f.setMetadataForItems)(c.data.itemsDeleted,u({},m,{deleted:!0,nextSync:null})),ae=o;return ae=i(ae,te,c.config),ae=i(ae,re,c.config),ae=l(ae,ne,c.config),w=u({},w,m),y(ae,w);case t.clearMeta:return g;default:return o}}},e.exports=t.default},function(e,t,r){function n(e){if(Array.isArray(e))return g(e.constructor(e.length),e);if("Map"===m(e))return new Map(e);if("Set"===m(e))return new Set(e);if(e&&"object"==typeof e){var t=e.constructor&&e.constructor.prototype;return g(Object.create(t||null),e)}return e}function a(){function e(r,a){if("function"==typeof a)return a(r);Array.isArray(r)&&Array.isArray(a)||p(!Array.isArray(a),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),p("object"==typeof a&&null!==a,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(t).join(", "));var o=r;return b(a).forEach(function(u){if(y.call(t,u)){var i=r===o;o=t[u](a[u],o,a,r),i&&e.isEquals(o,r)&&(o=r)}else{var c=e(r[u],a[u]);e.isEquals(c,o[u])&&(void 0!==c||y.call(r,u))||(o===r&&(o=n(r)),o[u]=c)}}),o}var t=g({},w);return e.extend=function(e,r){t[e]=r},e.isEquals=function(e,t){return e===t},e}function o(e,t,r){p(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",r,e),u(t[r],r)}function u(e,t){p(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function i(e,t){p(Array.isArray(e),"Expected $splice target to be an array; got %s",e),c(t.$splice)}function c(e){p(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function f(e){p("function"==typeof e,"update(): expected spec of $apply to be a function; got %s.",e)}function l(e){p(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}function s(e,t){p(t&&"object"==typeof t,"update(): $merge expects a spec of type 'object'; got %s",t),p(e&&"object"==typeof e,"update(): $merge expects a target of type 'object'; got %s",e)}function d(e,t){var r=m(e);p("Map"===r||"Set"===r,"update(): %s expects a target of type Set or Map; got %s",t,r)}var p=r(15),y=Object.prototype.hasOwnProperty,h=Array.prototype.splice,v=Object.prototype.toString,m=function(e){return v.call(e).slice(8,-1)},g=Object.assign||function(e,t){return b(t).forEach(function(r){y.call(t,r)&&(e[r]=t[r])}),e},b="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)},w={$push:function(e,t,r){return o(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return o(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,a){return i(t,r),e.forEach(function(e){c(e),t===a&&e.length&&(t=n(a)),h.apply(t,e)}),t},$set:function(e,t,r){return l(r),e},$toggle:function(e,t){u(e,"$toggle");var r=e.length?n(t):t;return e.forEach(function(e){r[e]=!t[e]}),r},$unset:function(e,t,r,a){return u(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===a&&(t=n(a)),delete t[e])}),t},$add:function(e,t,r,a){return d(t,"$add"),u(e,"$add"),"Map"===m(t)?e.forEach(function(e){var r=e[0],o=e[1];t===a&&t.get(r)!==o&&(t=n(a)),t.set(r,o)}):e.forEach(function(e){t!==a||t.has(e)||(t=n(a)),t.add(e)}),t},$remove:function(e,t,r,a){return d(t,"$remove"),u(e,"$remove"),e.forEach(function(e){t===a&&t.has(e)&&(t=n(a)),t.delete(e)}),t},$merge:function(e,t,r,a){return s(t,e),b(e).forEach(function(r){e[r]!==t[r]&&(t===a&&(t=n(a)),t[r]=e[r])}),t},$apply:function(e,t){return f(e),e(t)}};e.exports=a(),e.exports.newContext=a},function(e,t,r){"use strict";(function(t){var r=function(e,r,n,a,o,u,i,c){if("production"!==t.env.NODE_ENV&&void 0===r)throw new Error("invariant requires an error message argument");if(!e){var f;if(void 0===r)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,a,o,u,i,c],s=0;f=new Error(r.replace(/%s/g,function(){return l[s++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};e.exports=r}).call(t,r(5))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={idKey:"id",cache:!1,merge:!0,replace:!1,remote:!1,prefixLocalId:"ID_CREATED_LOCALLY___",showUpdatingProgress:!0,updateLocalBeforeRemote:!1,forceDelete:!0,includeProperties:null,excludeProperties:null,insertDataBeforeCreateSuccess:!1,eventKey:(0,a.default)()},e.exports=t.default}])});